#!/usr/bin/env ruby

require File.expand_path('../../vendor/bundle/bundler/setup', __FILE__)

# look for /XXX/lib and map XXX => gem root
aloxes = ($:.collect {|lib| lib.match(%r{(.*?/([^/]+))/lib}) }).compact.inject({}) {|acc, m| acc[m[2]] =  m[1]; acc }

ENV['PATH'] = aloxes.inject(ENV['PATH']) {|acc, alox|
  _, root = alox
  if File.directory? "#{root}/aloxec"
    "#{root}/aloxec:#{acc}"
  else
    acc
  end
}

if ARGV.length > 0
  system(*ARGV)
end
